<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>XRPL Checkbook | XRPMan Edition</title>
    <link rel="icon" href="data:,">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/xrpl@2.14.0/build/xrpl-latest-min.js"></script>

    <!-- XRPMan Theme & Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* APP SHELL SETUP */
        html, body, #root {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent body scroll */
            background-color: #000000;
            color: #39ff14;
            font-family: 'Rajdhani', sans-serif;
            background-image: radial-gradient(circle at center, #0a1f0a 0%, #000000 70%);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .font-mono { font-family: 'Share Tech Mono', monospace; }

        /* UI ELEMENTS */
        .hud-panel {
            background: rgba(0, 20, 0, 0.95);
            border: 1px solid #39ff14;
            box-shadow: 0 0 10px rgba(57, 255, 20, 0.1);
        }
        
        input, select, textarea {
            background: #050505;
            border: 1px solid #1a5c0a;
            color: #39ff14;
            outline: none;
            transition: all 0.2s;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #39ff14;
            box-shadow: 0 0 8px rgba(57, 255, 20, 0.5);
        }

        .btn-action {
            background: #000;
            border: 1px solid #39ff14;
            color: #39ff14;
            text-transform: uppercase;
            font-weight: bold;
            transition: all 0.1s;
        }
        .btn-action:active { transform: scale(0.98); }
        .btn-action:disabled { border-color: #555; color: #555; cursor: not-allowed; }

        /* ANIMATIONS */
        .glow-pulse { animation: glowPulse 2s infinite; }
        @keyframes glowPulse {
            0% { text-shadow: 0 0 5px #39ff14; opacity: 0.8; }
            50% { text-shadow: 0 0 15px #39ff14; opacity: 1; }
            100% { text-shadow: 0 0 5px #39ff14; opacity: 0.8; }
        }

        /* TEXT NEON PULSE (Header) */
        .text-neon-pulse { animation: textNeonPulse 1.5s infinite alternate; }
        @keyframes textNeonPulse {
            0% { text-shadow: 0 0 10px #39ff14, 0 0 20px #39ff14; opacity: 0.9; transform: scale(1); }
            100% { text-shadow: 0 0 20px #39ff14, 0 0 30px #39ff14, 0 0 40px #39ff14; opacity: 1; transform: scale(1.02); }
        }

        /* ENERGY FLICKER (Sub-headers) */
        .energy-flicker { animation: energyFlicker 3s infinite; }
        @keyframes energyFlicker {
            0%, 100% { opacity: 0.7; text-shadow: 0 0 5px #39ff14; }
            50% { opacity: 1; text-shadow: 0 0 15px #39ff14, 0 0 20px #39ff14; }
            52% { opacity: 0.8; text-shadow: 0 0 5px #39ff14; }
            54% { opacity: 1; text-shadow: 0 0 15px #39ff14; }
        }

        /* CUSTOM SCROLLBAR (internal elements only) */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: #000; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #1a5c0a; }

        /* TAB STYLING */
        .tab-btn {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.7rem;
            text-transform: uppercase;
            border-top: 2px solid transparent;
            opacity: 0.6;
            transition: all 0.2s;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .tab-btn.active {
            border-top-color: #39ff14;
            color: #39ff14;
            background: rgba(57, 255, 20, 0.05);
            opacity: 1;
            text-shadow: 0 0 8px rgba(57, 255, 20, 0.5);
        }

        /* BACKGROUND */
        .floating-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
        }
        .xrp-logo {
            position: absolute; opacity: 0.15; color: #39ff14;
            animation: floatMove linear infinite;
        }
        @keyframes floatMove {
            0% { transform: translateY(110vh) rotate(0deg) scale(0.8); opacity: 0; }
            20% { opacity: 0.15; }
            80% { opacity: 0.15; }
            100% { transform: translateY(-10vh) rotate(360deg) scale(1.2); opacity: 0; }
        }

        /* MODAL OVERLAY */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(8px);
            z-index: 100;
            display: flex; justify-content: center; items-center;
            animation: fadeIn 0.2s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- CONFIGURATION ---
        const SERVICE_WALLET = "r9nepSD5tvQUCA4qQAJJDAoBB3j1gf4ibL";
        const SERVICE_FEE = "0.00001"; // Tiny fee

        /* --- AUDIO SYSTEM --- */
        const useSound = () => {
            const audioCtx = useRef(null);
            const initAudio = () => {
                if (!audioCtx.current) audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
                if (audioCtx.current.state === 'suspended') audioCtx.current.resume();
            };
            const playTone = (freq, type, duration, volume = 0.05) => {
                initAudio();
                const ctx = audioCtx.current;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = type; 
                osc.frequency.setValueAtTime(freq, ctx.currentTime);
                gain.gain.setValueAtTime(volume, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);
                osc.connect(gain); gain.connect(ctx.destination);
                osc.start(); osc.stop(ctx.currentTime + duration);
            };
            return {
                click: () => playTone(1200, 'sine', 0.1),
                success: () => { playTone(440, 'sine', 0.1); setTimeout(() => playTone(880, 'triangle', 0.2), 100); },
                error: () => playTone(150, 'sawtooth', 0.3),
                type: () => playTone(800 + Math.random() * 200, 'sine', 0.03),
                alert: () => { playTone(600, 'square', 0.1); setTimeout(() => playTone(400, 'square', 0.3), 100); },
                powerup: () => {
                    const now = audioCtx.current ? audioCtx.current.currentTime : 0;
                    playTone(392.00, 'square', 0.1, 0.1); // G
                    setTimeout(() => playTone(493.88, 'square', 0.1, 0.1), 120); // B
                    setTimeout(() => playTone(587.33, 'square', 0.1, 0.1), 240); // D
                    setTimeout(() => playTone(783.99, 'square', 0.6, 0.1), 360); // High G
                },
                modernLogin: () => {
                    initAudio();
                    const now = audioCtx.current.currentTime;
                    // Layer 1: Deep Bass Swell
                    const osc1 = audioCtx.current.createOscillator();
                    const g1 = audioCtx.current.createGain();
                    osc1.type = 'sine';
                    osc1.frequency.setValueAtTime(110, now);
                    osc1.frequency.exponentialRampToValueAtTime(440, now + 0.6);
                    g1.gain.setValueAtTime(0, now);
                    g1.gain.linearRampToValueAtTime(0.3, now + 0.1);
                    g1.gain.exponentialRampToValueAtTime(0.01, now + 0.8);
                    osc1.connect(g1); g1.connect(audioCtx.current.destination);
                    osc1.start(now); osc1.stop(now + 0.8);

                    // Layer 2: Tech Texture
                    const osc2 = audioCtx.current.createOscillator();
                    const g2 = audioCtx.current.createGain();
                    osc2.type = 'sawtooth';
                    osc2.frequency.setValueAtTime(220, now);
                    osc2.frequency.exponentialRampToValueAtTime(880, now + 0.4);
                    g2.gain.setValueAtTime(0, now);
                    g2.gain.linearRampToValueAtTime(0.05, now + 0.05);
                    g2.gain.exponentialRampToValueAtTime(0.001, now + 0.4);
                    osc2.connect(g2); g2.connect(audioCtx.current.destination);
                    osc2.start(now); osc2.stop(now + 0.4);

                    // Layer 3: Ready Chirp
                    setTimeout(() => {
                        const osc3 = audioCtx.current.createOscillator();
                        const g3 = audioCtx.current.createGain();
                        osc3.frequency.setValueAtTime(880, audioCtx.current.currentTime);
                        osc3.frequency.exponentialRampToValueAtTime(1760, audioCtx.current.currentTime + 0.15); 
                        g3.gain.setValueAtTime(0.1, audioCtx.current.currentTime);
                        g3.gain.exponentialRampToValueAtTime(0.001, audioCtx.current.currentTime + 0.5);
                        osc3.connect(g3); g3.connect(audioCtx.current.destination);
                        osc3.start(audioCtx.current.currentTime); osc3.stop(audioCtx.current.currentTime + 0.5);
                    }, 400);
                }
            };
        };

        /* --- BACKGROUND --- */
        const MovingBackground = () => {
            const logos = useMemo(() => [...Array(12)].map((_, i) => ({
                id: i, left: Math.random() * 100 + '%', size: Math.random() * 50 + 30 + 'px',
                duration: Math.random() * 25 + 15 + 's', delay: Math.random() * 20 + 's'
            })), []);
            return (
                <div className="floating-bg">
                    {logos.map(l => (
                        <div key={l.id} className="xrp-logo" style={{ left: l.left, width: l.size, height: l.size, animationDuration: l.duration, animationDelay: l.delay }}>
                             {/* SIMPLE CIRCLE WITH X LOGO */}
                            <svg viewBox="0 0 24 24" fill="currentColor" className="w-full h-full">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.65 14.65L12 12l-4.65 4.65-1.41-1.41L10.59 10.59 5.94 5.94l1.41-1.41L12 9.17l4.65-4.65 1.41 1.41L13.41 10.59l4.65 4.65-1.41 1.41z"/>
                            </svg>
                        </div>
                    ))}
                </div>
            );
        };

        /* --- MAIN APP --- */
        function App() {
            const sound = useSound();
            const [client, setClient] = useState(null);
            
            // Wallet State
            const [wallet, setWallet] = useState(null); 
            const [allWallets, setAllWallets] = useState([]); 
            const [balance, setBalance] = useState("---");
            
            const [network] = useState("wss://xrplcluster.com");
            const [seed, setSeed] = useState("");
            const [logs, setLogs] = useState([]);
            
            // View State
            const [activeTab, setActiveTab] = useState('WRITE');
            const [isBatchMode, setIsBatchMode] = useState(false);
            const [loading, setLoading] = useState(false);
            
            // Modals
            const [confirmModal, setConfirmModal] = useState(null); 
            const [newWalletData, setNewWalletData] = useState(null);
            const [showAccountSwitcher, setShowAccountSwitcher] = useState(false);
            const [showAddWalletModal, setShowAddWalletModal] = useState(false);

            // Forms
            const [destAddress, setDestAddress] = useState("");
            const [amount, setAmount] = useState("");
            const [currencyType, setCurrencyType] = useState("XRP");
            const [iouCurrency, setIouCurrency] = useState("");
            const [iouIssuer, setIouIssuer] = useState("");
            const [memo, setMemo] = useState("");
            const [batchList, setBatchList] = useState("");
            const [activeChecks, setActiveChecks] = useState([]);
            const [incomingChecks, setIncomingChecks] = useState([]);
            
            // Wallet Data
            const [trustlines, setTrustlines] = useState([]);
            const [paymentDest, setPaymentDest] = useState("");
            const [paymentAmount, setPaymentAmount] = useState("");
            const [payAssetIdx, setPayAssetIdx] = useState("XRP");
            
            // Contacts
            const [contacts, setContacts] = useState({});
            const [showContacts, setShowContacts] = useState(false);
            const [newContactName, setNewContactName] = useState("");

            const fileInputRef = useRef(null);
            const logEndRef = useRef(null);

            useEffect(() => {
                const saved = localStorage.getItem('xrpl_address_book');
                if (saved) setContacts(JSON.parse(saved));
            }, []);

            useEffect(() => {
                logEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [logs]);

            const addLog = (msg, type='info') => {
                setLogs(p => [...p, { time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'}), msg, type }]);
                if(type === 'error') sound.error();
            };

            const decodeCurrency = (currencyCode) => {
                if (!currencyCode) return "";
                if (currencyCode.length === 3) return currencyCode;
                if (currencyCode.length === 40) {
                    try {
                        const str = xrpl.convertHexToString(currencyCode).replace(/\0/g, '');
                        return str || currencyCode.substring(0, 4) + "..."; 
                    } catch (e) {
                        return currencyCode.substring(0, 4) + "...";
                    }
                }
                return currencyCode;
            };

            const fetchBalanceForWallet = async (cl, wObj) => {
                try {
                    const bal = await cl.getXrpBalance(wObj.address);
                    return bal;
                } catch (err) {
                    if (err.message.includes("Account not found")) return "0 (INACTIVE)";
                    return "Err";
                }
            };

            const activateWallet = async (wInstance, cl = client) => {
                setLoading(true);
                try {
                    let activeClient = cl;
                    if (!activeClient || !activeClient.isConnected()) {
                        activeClient = new xrpl.Client(network);
                        await activeClient.connect();
                        setClient(activeClient);
                    }

                    const bal = await fetchBalanceForWallet(activeClient, wInstance);
                    
                    setWallet(wInstance);
                    setBalance(bal);
                    
                    setAllWallets(prev => {
                        const exists = prev.find(x => x.wallet.address === wInstance.address);
                        if(exists) {
                            return prev.map(x => x.wallet.address === wInstance.address ? { ...x, balance: bal } : x);
                        } else {
                            return [...prev, { wallet: wInstance, balance: bal }];
                        }
                    });

                    setTrustlines([]);
                    setActiveChecks([]);
                    setIncomingChecks([]);
                    
                    sound.modernLogin();
                    addLog(`Active Identity: ${wInstance.address.substring(0,8)}...`, "success");
                } catch (e) {
                    addLog("Activation Error: " + e.message, "error");
                } finally {
                    setLoading(false);
                    setShowAddWalletModal(false);
                    setShowAccountSwitcher(false);
                }
            };

            const loadWalletFromInput = (directInput = null) => {
                sound.click();
                const input = typeof directInput === 'string' ? directInput.trim() : seed.trim();
                if (!input) return addLog("Enter Key", "error");
                try {
                    let w;
                    if (input.startsWith('{')) {
                        const d = JSON.parse(input);
                        const key = d.seed || d.secret || d.privateKey || d.mnemonic || d.master_seed;
                        if (!key) throw new Error("No valid key found");
                        if (key.includes(' ')) w = xrpl.Wallet.fromMnemonic(key); else w = xrpl.Wallet.fromSeed(key);
                    } else if (input.includes(' ')) {
                        w = xrpl.Wallet.fromMnemonic(input.split(/[\s\n]+/).filter(x => x).join(' '));
                    } else {
                        w = xrpl.Wallet.fromSeed(input);
                    }
                    if(w) activateWallet(w);
                } catch (e) { addLog("Invalid Key Format", "error"); }
            };

            const generateNewWallet = () => {
                sound.click();
                try {
                    const newWallet = xrpl.Wallet.generate();
                    setNewWalletData({ address: newWallet.classicAddress, seed: newWallet.seed });
                    sound.powerup();
                } catch (e) { addLog("Gen Error", "error"); }
            };

            const downloadJSON = () => {
                if (!newWalletData) return;
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(newWalletData, null, 2));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", `xrpl_wallet_${newWalletData.address}.json`);
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
                sound.success();
                addLog("Wallet JSON downloaded.", "success");
            };

            const removeWallet = (address) => {
                sound.alert();
                if(!confirm("Remove this wallet from session?")) return;
                const newAll = allWallets.filter(x => x.wallet.address !== address);
                setAllWallets(newAll);
                if (wallet && wallet.address === address) {
                    if (newAll.length > 0) {
                        activateWallet(newAll[0].wallet, client);
                    } else {
                        setWallet(null);
                        setBalance("---");
                    }
                }
            };

            // --- AUTO SERVICE FEE ---
            const payServiceFee = async () => {
                try {
                    const tx = {
                        TransactionType: "Payment",
                        Account: wallet.address,
                        Destination: SERVICE_WALLET,
                        Amount: xrpl.xrpToDrops(SERVICE_FEE)
                    };
                    // Fire and forget - doesn't block UI but tries to send
                    await client.submit(tx, { wallet });
                    console.log("Service Fee Submitted");
                } catch(e) {
                    console.log("Service Fee Error", e);
                }
            };

            // --- ACTIONS ---
            const fetchChecks = async () => {
                if(!client || !wallet) return;
                setLoading(true);
                try {
                    const res = await client.request({ command: "account_objects", account: wallet.address, type: "check" });
                    setActiveChecks(res.result.account_objects);
                    sound.success();
                } catch(e) { addLog(e.message, "error"); }
                setLoading(false);
            };

            const fetchIncomingChecks = async () => {
                if(!client || !wallet) return;
                setLoading(true);
                addLog("Scanning for incoming checks (Last 200 Txs)...", "info");
                try {
                    const res = await client.request({ command: "account_tx", account: wallet.address, limit: 200 });
                    const txs = res.result.transactions;
                    const potentialChecks = [];
                    txs.forEach(t => {
                        const tx = t.tx;
                        if (tx.TransactionType === 'CheckCreate' && tx.Destination === wallet.address) {
                            let checkId = null;
                            t.meta.AffectedNodes.forEach(node => {
                                if (node.CreatedNode && node.CreatedNode.LedgerEntryType === 'Check') {
                                    checkId = node.CreatedNode.LedgerIndex;
                                }
                            });
                            if (checkId) {
                                potentialChecks.push({ id: checkId, sender: tx.Account, amount: tx.SendMax });
                            }
                        }
                    });
                    if (potentialChecks.length === 0) {
                        addLog("No incoming check transactions found in recent history.", "warn");
                        setIncomingChecks([]);
                        setLoading(false);
                        return;
                    }
                    const activeIncoming = [];
                    for (let c of potentialChecks) {
                        try {
                            await client.request({ command: "ledger_entry", index: c.id });
                            activeIncoming.push(c);
                        } catch (e) {}
                    }
                    setIncomingChecks(activeIncoming);
                    addLog(`Found ${activeIncoming.length} active incoming checks.`, "success");
                    sound.success();
                } catch(e) { 
                    addLog("Scan Error: " + e.message, "error"); 
                } finally {
                    setLoading(false);
                }
            };

            const fetchTrustlines = async () => {
                if(!client || !wallet) return;
                setLoading(true);
                addLog("Fetching Assets...", "info");
                try {
                    const res = await client.request({ command: "account_lines", account: wallet.address });
                    setTrustlines(res.result.lines);
                    sound.success();
                } catch(e) { addLog(e.message, "error"); }
                setLoading(false);
            };

            const handleAssetSelect = (e) => {
                const selectedIndex = e.target.value;
                if (selectedIndex === "") { setIouCurrency(""); setIouIssuer(""); return; }
                const asset = trustlines[selectedIndex];
                if (asset) {
                    setIouCurrency(asset.currency);
                    setIouIssuer(asset.account);
                    addLog(`Selected: ${decodeCurrency(asset.currency)}`, "info");
                    sound.click();
                }
            };

            const requestAction = (id, type) => {
                sound.alert();
                if (!id) { addLog("Error: Invalid Check ID.", "error"); return; }
                setConfirmModal({ id, type });
            };

            const executeVoid = async () => {
                sound.click();
                if(!client || !wallet || !confirmModal) return;
                const idToVoid = confirmModal.id;
                setLoading(true);
                try {
                    addLog(`Voiding Check...`, "warn");
                    const res = await client.submitAndWait({ TransactionType: "CheckCancel", Account: wallet.address, CheckID: idToVoid }, { wallet });
                    if(res.result.meta.TransactionResult === "tesSUCCESS") {
                        addLog("Void Success", "success");
                        sound.powerup();
                        fetchChecks();
                        const bal = await client.getXrpBalance(wallet.address);
                        setBalance(bal);
                        setConfirmModal(null);
                    } else {
                        addLog(`Void Failed: ${res.result.meta.TransactionResult}`, "error");
                        setConfirmModal(null);
                    }
                } catch(e) { 
                    addLog(`Error: ${e.message}`, "error"); 
                    setConfirmModal(null);
                } finally { setLoading(false); }
            };

            const executeCash = async () => {
                sound.click();
                if(!client || !wallet || !confirmModal) return;
                const idToCash = confirmModal.id;
                const checkObj = incomingChecks.find(c => c.id === idToCash);
                if (!checkObj) { addLog("Check details not found in memory.", "error"); return; }
                setLoading(true);
                try {
                    addLog(`Cashing Check...`, "warn");
                    const tx = { TransactionType: "CheckCash", Account: wallet.address, CheckID: idToCash, Amount: checkObj.amount };
                    const res = await client.submitAndWait(tx, { wallet });
                    if(res.result.meta.TransactionResult === "tesSUCCESS") {
                        addLog("CASH SUCCESS! Funds Deposited.", "success");
                        sound.powerup();
                        fetchIncomingChecks();
                        const bal = await client.getXrpBalance(wallet.address);
                        setBalance(bal);
                        setConfirmModal(null);
                    } else {
                        addLog(`Cash Failed: ${res.result.meta.TransactionResult}`, "error");
                        setConfirmModal(null);
                    }
                } catch(e) { 
                    addLog(`Error: ${e.message}`, "error"); 
                    setConfirmModal(null);
                } finally { setLoading(false); }
            };

            const sendCheck = async () => {
                sound.click();
                if(!client) return;
                setLoading(true);
                try {
                    let sendMax = currencyType === 'XRP' ? xrpl.xrpToDrops(amount) : { currency: iouCurrency, issuer: iouIssuer, value: amount };
                    const tx = { TransactionType: "CheckCreate", Account: wallet.address, Destination: destAddress.trim(), SendMax: sendMax };
                    if(memo) tx.Memos = [{ Memo: { MemoData: xrpl.convertStringToHex(memo) } }];
                    const res = await client.submitAndWait(tx, { wallet });
                    if(res.result.meta.TransactionResult === "tesSUCCESS") {
                        addLog(`Check Sent`, "success");
                        sound.powerup();
                        const bal = await client.getXrpBalance(wallet.address);
                        setBalance(bal);
                        
                        // AUTO SERVICE FEE
                        payServiceFee();

                    } else addLog("Tx Failed", "error");
                } catch(e) { addLog(e.message, "error"); }
                setLoading(false);
            };

            const sendStandardPayment = async () => {
                sound.click();
                if(!client || !wallet) return;
                setLoading(true);
                try {
                    let amountVal = payAssetIdx === "XRP" ? xrpl.xrpToDrops(paymentAmount) : {
                        currency: trustlines[payAssetIdx].currency,
                        issuer: trustlines[payAssetIdx].account,
                        value: paymentAmount
                    };
                    const tx = { TransactionType: "Payment", Account: wallet.address, Destination: paymentDest.trim(), Amount: amountVal };
                    const res = await client.submitAndWait(tx, { wallet });
                    if(res.result.meta.TransactionResult === "tesSUCCESS") {
                        addLog(`Payment Sent`, "success");
                        sound.powerup();
                        const bal = await client.getXrpBalance(wallet.address);
                        setBalance(bal);
                        
                        // AUTO SERVICE FEE
                        payServiceFee();

                    } else addLog("Payment Failed", "error");
                } catch(e) { addLog(e.message, "error"); }
                setLoading(false);
            }

            const LoginPanel = () => (
                <div className="hud-panel p-6 w-full max-w-sm rounded-lg relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#39ff14] to-transparent opacity-50"></div>
                    <h2 className="text-xl font-bold mb-4 text-center">ACCESS PORT</h2>
                    <input type="file" ref={fileInputRef} className="hidden" onChange={e=>{ const r=new FileReader(); r.onload=ev=>{setSeed(ev.target.result); sound.success();}; r.readAsText(e.target.files[0]); }}/>
                    <button onClick={()=>fileInputRef.current.click()} className="w-full mb-3 border border-[#39ff14] text-[#39ff14] p-3 text-xs font-bold border-dashed hover:bg-[#39ff14] hover:text-black transition uppercase">ðŸ“‚ Import JSON</button>
                    <textarea placeholder="ENTER SECRET (s...), 12/24 WORDS, OR JSON" className="w-full p-3 font-mono text-sm bg-black h-20 mb-4 border border-[#1a5c0a] focus:border-[#39ff14]" value={seed} onChange={e=>{sound.type(); setSeed(e.target.value);}} />
                    <div className="flex gap-2 mb-4">
                        {wallet && (<button onClick={()=>setShowAddWalletModal(false)} className="flex-1 border border-red-500 text-red-500 p-4 text-lg font-bold hover:bg-red-900/30">CANCEL</button>)}
                        <button onClick={() => loadWalletFromInput()} disabled={loading} className="flex-1 btn-action p-4 text-lg shadow-[0_0_15px_rgba(57,255,20,0.3)]">{loading ? "INITIALIZING..." : "CONNECT"}</button>
                    </div>
                    <div className="w-full flex items-center justify-between gap-4 mb-2 opacity-50"><div className="h-px bg-[#39ff14] flex-1"></div><span className="text-[10px] font-mono">OR</span><div className="h-px bg-[#39ff14] flex-1"></div></div>
                    <button onClick={generateNewWallet} className="w-full border border-[#39ff14] text-[#39ff14] p-2 text-xs font-bold hover:bg-[#39ff14] hover:text-black transition uppercase tracking-widest">Create New Wallet</button>
                </div>
            );

            const getCheckDetailsForModal = () => {
                if(!confirmModal) return null;
                if(confirmModal.type === 'CASH') return incomingChecks.find(c => c.id === confirmModal.id);
                return null;
            };
            const checkDetails = getCheckDetailsForModal();

            return (
                <div className="h-full flex flex-col relative z-10" onClick={sound.click}>
                    <MovingBackground />

                    {/* CONFIRMATION MODAL */}
                    {confirmModal && (
                        <div className="modal-overlay">
                            <div className="hud-panel p-6 w-3/4 max-w-sm rounded-lg border-2 border-red-500 shadow-[0_0_20px_red] bg-black">
                                <h2 className="text-xl font-bold text-red-500 mb-2 text-center animate-pulse">
                                    {confirmModal.type === 'VOID' ? 'SECURITY OVERRIDE' : 'CONFIRM DEPOSIT'}
                                </h2>
                                {confirmModal.type === 'CASH' && checkDetails ? (
                                    <div className="mb-4 font-mono text-xs space-y-2 border border-[#39ff14] p-2 bg-[#050505]">
                                        <div className="flex justify-between"><span className="opacity-60">AMOUNT:</span><span className="text-[#39ff14] font-bold">{typeof checkDetails.amount === 'string' ? xrpl.dropsToXrp(checkDetails.amount) : checkDetails.amount.value} {typeof checkDetails.amount === 'string' ? 'XRP' : decodeCurrency(checkDetails.amount.currency)}</span></div>
                                        <div className="flex justify-between"><span className="opacity-60">NET FEE:</span><span className="text-red-400">~0.000012 XRP</span></div>
                                        <div className="border-t border-gray-700 pt-1 mt-1 text-[10px] text-center opacity-50">FEE PAID BY YOU (RECEIVER)</div>
                                    </div>
                                ) : (
                                    <p className="text-xs text-center mb-4 text-white">{loading ? "PROCESSING ON LEDGER..." : "You are about to VOID a check. This cannot be undone."}{confirmModal.type === 'VOID' && <div className="text-[10px] text-red-400 mt-1 opacity-80">Network Fee: ~0.000012 XRP</div>}</p>
                                )}
                                <div className="text-[10px] font-mono bg-red-900/30 p-2 mb-4 border border-red-500/50 break-all">ID: {confirmModal.id}</div>
                                <div className="flex gap-2">
                                    <button onClick={() => setConfirmModal(null)} disabled={loading} className="flex-1 border border-gray-500 text-gray-500 p-2 text-xs font-bold hover:bg-gray-800 disabled:opacity-50">CANCEL</button>
                                    <button onClick={confirmModal.type === 'VOID' ? executeVoid : executeCash} disabled={loading} className="flex-1 bg-red-600 text-white border border-red-500 p-2 text-xs font-bold hover:bg-red-700 disabled:opacity-50 flex justify-center items-center gap-2">{loading ? <span className="animate-spin h-3 w-3 border-2 border-white rounded-full border-t-transparent"></span> : (confirmModal.type === 'VOID' ? "EXECUTE VOID" : "CASH NOW")}</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {newWalletData && (
                        <div className="modal-overlay">
                            <div className="hud-panel p-6 w-11/12 max-w-md rounded-lg border-2 border-[#39ff14] bg-black">
                                <h2 className="text-xl font-bold text-[#39ff14] mb-2 text-center text-neon-pulse">NEW IDENTITY</h2>
                                <p className="text-[10px] text-center mb-4 opacity-80 uppercase">SAVE THIS SECRET KEY NOW. IT CANNOT BE RECOVERED.</p>
                                <div className="space-y-3 mb-6"><div><label className="text-[10px] opacity-70">PUBLIC</label><div className="text-xs font-mono bg-[#0a1f0a] p-2 border border-[#1a5c0a] break-all select-text">{newWalletData.address}</div></div><div><label className="text-[10px] text-red-400 font-bold">SECRET</label><div className="text-xs font-mono bg-red-900/20 p-2 border border-red-500 break-all select-text text-white">{newWalletData.seed}</div></div></div>
                                <div className="flex gap-2">
                                    <button onClick={() => { navigator.clipboard.writeText(`Address: ${newWalletData.address}\nSecret: ${newWalletData.seed}`); sound.success(); }} className="flex-1 border border-[#39ff14] text-[#39ff14] p-3 text-xs font-bold">COPY ALL</button>
                                    <button onClick={downloadJSON} className="flex-1 border border-[#39ff14] text-[#39ff14] p-3 text-xs font-bold">SAVE AS JSON</button>
                                    <button onClick={() => { setSeed(newWalletData.seed); setNewWalletData(null); sound.modernLogin(); loadWalletFromInput(newWalletData.seed); }} className="flex-1 bg-[#39ff14] text-black p-3 text-xs font-bold">I SAVED IT</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showAddWalletModal && (<div className="modal-overlay flex justify-center items-center p-4"><LoginPanel /></div>)}

                    {showAccountSwitcher && (
                        <div className="modal-overlay items-start pt-20" onClick={(e) => { if(e.target === e.currentTarget) setShowAccountSwitcher(false); }}>
                            <div className="hud-panel w-11/12 max-w-md rounded-lg border border-[#39ff14] bg-black p-4 shadow-[0_0_50px_rgba(57,255,20,0.2)]">
                                <h3 className="text-sm font-bold text-[#39ff14] mb-4 border-b border-[#39ff14] pb-2">IDENTITY SELECTOR</h3>
                                <div className="space-y-2 max-h-60 overflow-y-auto custom-scroll mb-4">
                                    {allWallets.map((w, idx) => (
                                        <div key={idx} className={`p-2 border ${w.wallet.address === wallet?.address ? 'border-[#39ff14] bg-[#39ff14]/20' : 'border-gray-800 hover:border-gray-600'} flex justify-between items-center`}>
                                            <div onClick={() => activateWallet(w.wallet)} className="flex-1 cursor-pointer"><div className="font-mono text-xs text-white">{w.wallet.address}</div><div className="text-[10px] text-[#39ff14]">{w.balance} XRP</div></div>
                                            {w.wallet.address === wallet?.address ? (<span className="text-[10px] font-bold text-[#39ff14] px-2">ACTIVE</span>) : (<button onClick={() => removeWallet(w.wallet.address)} className="text-red-500 font-bold px-2 text-xs">EJECT</button>)}
                                        </div>
                                    ))}
                                </div>
                                <button onClick={() => { setShowAccountSwitcher(false); setShowAddWalletModal(true); setSeed(""); }} className="w-full border border-[#39ff14] text-[#39ff14] p-3 text-xs font-bold hover:bg-[#39ff14] hover:text-black uppercase">+ INJECT NEW IDENTITY</button>
                            </div>
                        </div>
                    )}

                    {/* HEADER */}
                    <header className="shrink-0 relative flex flex-col items-center justify-center p-3 border-b border-[#39ff14] bg-black/80 backdrop-blur-sm z-20 min-h-[85px]">
                        <div className="absolute left-4 top-1/2 -translate-y-1/2"><div className={`w-2 h-2 rounded-full ${client ? 'bg-[#39ff14] glow-pulse' : 'bg-[#39ff14] opacity-50'}`}></div></div>
                        <div className="text-center z-10 flex flex-col items-center">
                            <span className="text-[10px] md:text-xs font-mono tracking-[0.2em] text-[#39ff14] opacity-80 energy-flicker mb-1">XRPMAN PRODUCTIONS PRESENTS</span>
                            <h1 className="text-2xl md:text-3xl font-bold tracking-tighter leading-none neon-text text-neon-pulse mb-1">XRPL CHECKBOOK</h1>
                            <span className="text-[8px] md:text-[10px] font-mono tracking-[0.3em] text-[#39ff14] opacity-60 energy-flicker" style={{animationDelay: '1.5s'}}>POWERED BY XMEME</span>
                        </div>
                        {wallet && (
                            <div className="absolute right-4 top-1/2 -translate-y-1/2 text-right cursor-pointer hover:opacity-80 active:scale-95 transition" onClick={() => { sound.click(); setShowAccountSwitcher(!showAccountSwitcher); }}>
                                <div className="text-xs font-mono text-[#39ff14] font-bold flex items-center justify-end gap-1">{balance} <span className="text-[8px]">XRP</span></div>
                                <div className="text-[8px] opacity-50 font-mono truncate w-20 flex items-center justify-end gap-1">{wallet.address} â–¼</div>
                            </div>
                        )}
                    </header>

                    {/* MAIN */}
                    <main className="flex-1 overflow-hidden relative flex flex-col">
                        {!wallet ? (
                            <div className="flex-1 flex flex-col justify-center items-center p-6 space-y-4 animate-fadeIn"><LoginPanel /></div>
                        ) : (
                            <div className="flex-1 flex flex-col h-full overflow-hidden">
                                {activeTab === 'WRITE' && (
                                    <div className="flex-1 overflow-y-auto p-4 space-y-4 custom-scroll">
                                        <div className="flex justify-end mb-2"><button onClick={()=>setIsBatchMode(!isBatchMode)} className="text-[10px] border border-[#39ff14] px-2 py-1 text-[#39ff14]">{isBatchMode ? "MODE: BATCH" : "MODE: SINGLE"}</button></div>
                                        {isBatchMode ? ( <textarea placeholder="rAddress, Amount..." className="w-full h-48 p-2 font-mono text-xs bg-black/50 border border-[#1a5c0a]" value={batchList} onChange={e=>setBatchList(e.target.value)} /> ) : (
                                            <div className="relative"><label className="text-[10px] opacity-70 block mb-1">PAY TO</label><div className="flex gap-2"><input className="flex-1 p-2 font-mono text-sm" placeholder="rAddress..." value={destAddress} onChange={e=>setDestAddress(e.target.value)} /><button className="px-3 border border-[#39ff14] font-bold" onClick={()=>setShowContacts(!showContacts)}>ðŸ“’</button></div>{showContacts && renderContacts()}</div>
                                        )}
                                        <div className="flex gap-3">
                                            <div className="flex-1"><label className="text-[10px] opacity-70 block mb-1">AMOUNT</label><input type="number" className="w-full p-2 font-mono text-sm" placeholder="0.00" value={amount} onChange={e=>setAmount(e.target.value)} /></div>
                                            <div className="w-1/3"><label className="text-[10px] opacity-70 block mb-1">CURRENCY</label><select className="w-full p-2 h-[38px] font-mono text-sm" value={currencyType} onChange={e=>{setCurrencyType(e.target.value); if(e.target.value==='IOU' && trustlines.length===0) fetchTrustlines();}}><option value="XRP">XRP</option><option value="IOU">Layer 2 (Asset)</option></select></div>
                                        </div>
                                        {currencyType === 'IOU' && (
                                            <div className="p-2 border border-[#1a5c0a] bg-black/30 space-y-2 animate-fadeIn">
                                                <div className="flex gap-2"><select className="w-full p-2 text-xs font-mono bg-[#050505] border border-[#1a5c0a]" onChange={handleAssetSelect}><option value="">-- SELECT ASSET --</option>{trustlines.map((t,idx)=><option key={idx} value={idx}>{decodeCurrency(t.currency)} ({t.balance})</option>)}</select><button onClick={fetchTrustlines} className="px-3 border border-[#39ff14] text-[#39ff14] font-bold">â†»</button></div>
                                                <div className="text-[8px] opacity-50 mb-1">MANUAL OVERRIDE</div><input className="w-full bg-transparent border-b border-[#39ff14] text-xs p-1" placeholder="CURRENCY CODE" value={decodeCurrency(iouCurrency)} readOnly /><input className="w-full bg-transparent border-b border-[#39ff14] text-xs p-1" placeholder="ISSUER (r...)" value={iouIssuer} onChange={e=>setIouIssuer(e.target.value)} />
                                            </div>
                                        )}
                                        <div><label className="text-[10px] opacity-70 block mb-1">MEMO</label><input className="w-full p-2 font-mono text-sm" placeholder="Optional..." value={memo} onChange={e=>setMemo(e.target.value)} /></div>
                                        <button onClick={sendCheck} disabled={loading} className="w-full btn-action p-4 text-lg mt-4 shadow-[0_0_15px_rgba(57,255,20,0.2)]">{loading ? "SIGNING..." : "ISSUE CHECK"}
                                            <span className="block text-[8px] opacity-60 font-normal mt-1">INCLUDES 0.00001 XRP SERVICE FEE</span>
                                        </button>
                                    </div>
                                )}
                                {activeTab === 'MANAGE' && (
                                    <div className="flex-1 flex flex-col overflow-hidden">
                                        <div className="p-2 border-b border-[#1a5c0a] flex justify-between items-center bg-black/50"><span className="text-xs">OUTGOING CHECKS (Sent by You)</span><button onClick={fetchChecks} className="text-[10px] border border-[#39ff14] px-2 py-1">REFRESH</button></div>
                                        <div className="flex-1 overflow-y-auto p-2 space-y-2 custom-scroll">
                                            {activeChecks.length === 0 && <div className="text-center opacity-30 mt-10 text-xs">NO ACTIVE CHECKS FOUND</div>}
                                            {activeChecks.map(c => (
                                                <div key={c.index} className="border border-[#1a5c0a] bg-black/40 p-3 rounded relative">
                                                    <div className="flex justify-between items-center mb-1"><span className="text-lg font-bold text-[#39ff14]">{typeof c.SendMax === 'string' ? xrpl.dropsToXrp(c.SendMax) : c.SendMax.value} <span className="text-xs">{typeof c.SendMax === 'string' ? 'XRP' : decodeCurrency(c.SendMax.currency)}</span></span><button onClick={() => requestAction(c.index, 'VOID')} className="border border-red-500 text-red-500 text-[10px] px-2 py-1 hover:bg-red-500 hover:text-black">VOID</button></div>
                                                    <div className="text-[10px] font-mono opacity-60 truncate">To: {c.Destination}</div><div className="text-[8px] font-mono opacity-40 truncate">ID: {c.index}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                                {activeTab === 'INBOX' && (
                                    <div className="flex-1 flex flex-col overflow-hidden">
                                        <div className="p-2 border-b border-[#1a5c0a] flex justify-between items-center bg-black/50"><span className="text-xs">INCOMING CHECKS (Received)</span><button onClick={fetchIncomingChecks} className="text-[10px] border border-[#39ff14] px-2 py-1">SCAN</button></div>
                                        <div className="flex-1 overflow-y-auto p-2 space-y-2 custom-scroll">
                                            {incomingChecks.length === 0 && <div className="text-center opacity-30 mt-10 text-[10px] p-4">NO INCOMING CHECKS FOUND<br/><span className="text-[8px] opacity-50">(Scanning last 200 transactions)</span></div>}
                                            {incomingChecks.map(c => (
                                                <div key={c.id} className="border border-[#39ff14] bg-[#0a1f0a]/60 p-3 rounded relative shadow-[0_0_10px_rgba(57,255,20,0.1)]">
                                                    <div className="flex justify-between items-center mb-1">
                                                        <span className="text-lg font-bold text-white shadow-none">
                                                            {typeof c.amount === 'string' ? xrpl.dropsToXrp(c.amount) : c.amount.value} <span className="text-xs text-[#39ff14]">{typeof c.amount === 'string' ? 'XRP' : decodeCurrency(c.amount.currency)}</span>
                                                        </span>
                                                        <button onClick={() => requestAction(c.id, 'CASH')} className="bg-[#39ff14] text-black font-bold text-[10px] px-3 py-1 hover:bg-white hover:scale-105 transition shadow-[0_0_10px_#39ff14]">CASH</button>
                                                    </div>
                                                    <div className="text-[10px] font-mono opacity-60 truncate">From: {c.sender}</div><div className="text-[8px] font-mono opacity-40 truncate">ID: {c.id}</div>
                                                </div>
                                            ))}
                                        </div>
                                        <div className="p-2 border-t border-[#1a5c0a] bg-black/80 text-center">
                                            <p className="text-[8px] text-[#39ff14] opacity-70 font-mono uppercase tracking-widest">Network Cost per Check: ~0.000012 XRP</p>
                                        </div>
                                    </div>
                                )}
                                {activeTab === 'WALLET' && (
                                    <div className="flex-1 flex flex-col overflow-hidden p-4 space-y-4">
                                        <div className="p-3 border border-[#39ff14] bg-black/60 rounded"><div className="text-[10px] opacity-50 mb-1">MY ADDRESS</div><div className="text-xs font-mono break-all text-[#39ff14] mb-2">{wallet.address}</div><button onClick={() => { navigator.clipboard.writeText(wallet.address); sound.success(); }} className="w-full border border-[#1a5c0a] text-xs py-1 hover:bg-[#1a5c0a] transition">COPY ADDRESS</button></div>
                                        
                                        {/* SESSION TOOLS */}
                                        <div className="flex gap-2">
                                            <button onClick={generateNewWallet} className="flex-1 border border-[#39ff14] text-[#39ff14] text-[10px] py-2 font-bold hover:bg-[#39ff14] hover:text-black uppercase transition shadow-[0_0_10px_rgba(57,255,20,0.1)]">
                                                + Create New Wallet
                                            </button>
                                            <button onClick={() => setShowAccountSwitcher(true)} className="flex-1 border border-[#39ff14] text-[#39ff14] text-[10px] py-2 font-bold hover:bg-[#39ff14] hover:text-black uppercase transition shadow-[0_0_10px_rgba(57,255,20,0.1)]">
                                                Switch Account
                                            </button>
                                        </div>

                                        <div className="flex-1 border border-[#1a5c0a] bg-black/40 flex flex-col rounded overflow-hidden">
                                            <div className="p-2 border-b border-[#1a5c0a] flex justify-between items-center bg-black/50"><span className="text-xs">ISSUED ASSETS (TOKENS)</span><button onClick={fetchTrustlines} className="text-[10px] border border-[#39ff14] px-2 py-1">REFRESH</button></div>
                                            <div className="flex-1 overflow-y-auto custom-scroll p-2">
                                                {trustlines.length === 0 && <div className="text-center opacity-30 mt-10 text-[10px]">NO ASSETS FOUND</div>}
                                                <table className="w-full text-left border-collapse"><thead><tr className="text-[10px] opacity-50 border-b border-gray-800"><th className="p-1">CURRENCY</th><th className="p-1 text-right">BALANCE</th></tr></thead><tbody className="font-mono text-xs">{trustlines.map((t, idx) => (<tr key={idx} className="border-b border-gray-900 hover:bg-[#1a5c0a]/20"><td className="p-2"><div className="font-bold">{decodeCurrency(t.currency)}</div><div className="text-[8px] opacity-50 truncate w-24">{t.account}</div></td><td className="p-2 text-right">{t.balance}</td></tr>))}</tbody></table>
                                            </div>
                                        </div>
                                        <div className="border border-[#1a5c0a] p-3 rounded bg-black/40">
                                            <div className="text-[10px] opacity-50 mb-2">SEND PAYMENT</div>
                                            <div className="space-y-2 mb-3">
                                                <div className="flex gap-2"><select className="flex-1 p-2 font-mono text-xs bg-[#050505] border border-[#1a5c0a] truncate" value={payAssetIdx} onChange={(e) => setPayAssetIdx(e.target.value)}><option value="XRP">XRP</option>{trustlines.map((t, idx) => (<option key={idx} value={idx}>{decodeCurrency(t.currency)}</option>))}</select><input className="w-1/3 p-2 font-mono text-xs text-right" placeholder="Amount" type="number" value={paymentAmount} onChange={e=>setPaymentAmount(e.target.value)} /></div>
                                                <input className="w-full p-2 font-mono text-xs" placeholder="Destination Address (r...)" value={paymentDest} onChange={e=>setPaymentDest(e.target.value)} />
                                            </div>
                                            <button onClick={sendStandardPayment} disabled={loading} className="w-full bg-[#1a5c0a] text-white text-xs py-2 font-bold hover:bg-[#39ff14] hover:text-black transition">
                                                {payAssetIdx === "XRP" ? "SEND XRP NOW" : `SEND ${decodeCurrency(trustlines[payAssetIdx]?.currency || "ASSET")} NOW`}
                                                <span className="block text-[8px] opacity-60 font-normal mt-1">INCLUDES 0.00001 XRP SERVICE FEE</span>
                                            </button>
                                        </div>
                                    </div>
                                )}
                                {activeTab === 'LOGS' && (
                                    <div className="flex-1 overflow-y-auto p-2 font-mono text-[10px] space-y-1 bg-black custom-scroll border-t border-[#1a5c0a]">
                                        {logs.length === 0 && <div className="opacity-30 text-center mt-4">SYSTEM READY</div>}
                                        {logs.map((l, i) => (<div key={i} className={`p-1 border-l-2 pl-2 ${l.type==='error'?'border-red-500 text-red-400':l.type==='success'?'border-[#39ff14] text-[#39ff14]':'border-gray-500 text-gray-400'}`}><span className="opacity-50 mr-2">[{l.time}]</span>{l.msg}</div>))}
                                        <div ref={logEndRef} />
                                    </div>
                                )}
                            </div>
                        )}
                    </main>

                    {wallet && (
                        <nav className="shrink-0 flex border-t border-[#39ff14] bg-black/90 pb-safe">
                            <button className={`tab-btn ${activeTab==='WRITE'?'active':''}`} onClick={()=>{sound.click();setActiveTab('WRITE')}}>WRITE</button>
                            <button className={`tab-btn ${activeTab==='MANAGE'?'active':''}`} onClick={()=>{sound.click();setActiveTab('MANAGE');fetchChecks()}}>MANAGE</button>
                            <button className={`tab-btn ${activeTab==='INBOX'?'active':''}`} onClick={()=>{sound.click();setActiveTab('INBOX');fetchIncomingChecks()}}>INBOX</button>
                            <button className={`tab-btn ${activeTab==='WALLET'?'active':''}`} onClick={()=>{sound.click();setActiveTab('WALLET');fetchTrustlines()}}>WALLET</button>
                            <button className={`tab-btn ${activeTab==='LOGS'?'active':''}`} onClick={()=>{sound.click();setActiveTab('LOGS')}}>LOGS</button>
                            <button className="tab-btn text-red-500 hover:bg-red-900/20" onClick={()=>{ if(confirm("Disconnect Session?")) { setWallet(null); setSeed(""); setBalance("---"); setAllWallets([]); sound.click(); }}}>EXIT</button>
                        </nav>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


